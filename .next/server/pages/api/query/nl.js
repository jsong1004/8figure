"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/query/nl";
exports.ids = ["pages/api/query/nl"];
exports.modules = {

/***/ "@google-cloud/bigquery":
/*!*****************************************!*\
  !*** external "@google-cloud/bigquery" ***!
  \*****************************************/
/***/ ((module) => {

module.exports = require("@google-cloud/bigquery");

/***/ }),

/***/ "google-auth-library":
/*!**************************************!*\
  !*** external "google-auth-library" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("google-auth-library");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquery%2Fnl&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fquery%2Fnl.ts&middlewareConfigBase64=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquery%2Fnl&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fquery%2Fnl.ts&middlewareConfigBase64=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_query_nl_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/query/nl.ts */ \"(api)/./pages/api/query/nl.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_query_nl_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_query_nl_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/query/nl\",\n        pathname: \"/api/query/nl\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_query_nl_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4wLjRfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnF1ZXJ5JTJGbmwmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnF1ZXJ5JTJGbmwudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDcEQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLG1EQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxtREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaWdxdWVyeS1hZHMtYW5hbHl0aWNzLz80NTdhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvcXVlcnkvbmwudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9xdWVyeS9ubFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3F1ZXJ5L25sXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquery%2Fnl&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fquery%2Fnl.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/bigquery.ts":
/*!*************************!*\
  !*** ./lib/bigquery.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getBigQueryClient: () => (/* binding */ getBigQueryClient),\n/* harmony export */   getBigQueryClientWithToken: () => (/* binding */ getBigQueryClientWithToken),\n/* harmony export */   getTableSchema: () => (/* binding */ getTableSchema),\n/* harmony export */   runQuery: () => (/* binding */ runQuery)\n/* harmony export */ });\n/* harmony import */ var _google_cloud_bigquery__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google-cloud/bigquery */ \"@google-cloud/bigquery\");\n/* harmony import */ var _google_cloud_bigquery__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_google_cloud_bigquery__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var google_auth_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! google-auth-library */ \"google-auth-library\");\n/* harmony import */ var google_auth_library__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(google_auth_library__WEBPACK_IMPORTED_MODULE_1__);\n\n\nlet bigqueryClient = null;\nfunction getBigQueryClient() {\n    if (!bigqueryClient) {\n        const auth = new google_auth_library__WEBPACK_IMPORTED_MODULE_1__.GoogleAuth({\n            scopes: [\n                \"https://www.googleapis.com/auth/bigquery\"\n            ],\n            credentials: {\n                client_id: process.env.GOOGLE_CLIENT_ID,\n                client_secret: process.env.GOOGLE_CLIENT_SECRET,\n                refresh_token: process.env.GOOGLE_REFRESH_TOKEN,\n                type: \"authorized_user\"\n            }\n        });\n        bigqueryClient = new _google_cloud_bigquery__WEBPACK_IMPORTED_MODULE_0__.BigQuery({\n            projectId: \"ai-biz-6b7ec\",\n            auth\n        });\n    }\n    return bigqueryClient;\n}\nasync function getBigQueryClientWithToken(accessToken) {\n    const auth = new google_auth_library__WEBPACK_IMPORTED_MODULE_1__.GoogleAuth({\n        scopes: [\n            \"https://www.googleapis.com/auth/bigquery\"\n        ]\n    });\n    // Set the access token\n    const authClient = await auth.getClient();\n    authClient.credentials = {\n        access_token: accessToken\n    };\n    return new _google_cloud_bigquery__WEBPACK_IMPORTED_MODULE_0__.BigQuery({\n        projectId: \"ai-biz-6b7ec\",\n        auth: authClient\n    });\n}\nasync function runQuery(query) {\n    const bigquery = getBigQueryClient();\n    const [rows] = await bigquery.query({\n        query,\n        location: \"us-west1\" || 0\n    });\n    return rows;\n}\nasync function getTableSchema() {\n    const bigquery = getBigQueryClient();\n    const dataset = bigquery.dataset(\"n8n\");\n    const table = dataset.table(\"ads_spend\");\n    const [metadata] = await table.getMetadata();\n    return metadata.schema.fields.map((field)=>({\n            name: field.name,\n            type: field.type,\n            mode: field.mode || \"NULLABLE\",\n            description: field.description || \"\"\n        }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvYmlncXVlcnkudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDRDtBQUVqRCxJQUFJRSxpQkFBa0M7QUFFL0IsU0FBU0M7SUFDZCxJQUFJLENBQUNELGdCQUFnQjtRQUNuQixNQUFNRSxPQUFPLElBQUlILDJEQUFVQSxDQUFDO1lBQzFCSSxRQUFRO2dCQUFDO2FBQTJDO1lBQ3BEQyxhQUFhO2dCQUNYQyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtnQkFDdkNDLGVBQWVILFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CO2dCQUMvQ0MsZUFBZUwsUUFBUUMsR0FBRyxDQUFDSyxvQkFBb0I7Z0JBQy9DQyxNQUFNO1lBQ1I7UUFDRjtRQUVBYixpQkFBaUIsSUFBSUYsNERBQVFBLENBQUM7WUFDNUJnQixXQUFXUixjQUFzQjtZQUNqQ0o7UUFDRjtJQUNGO0lBQ0EsT0FBT0Y7QUFDVDtBQUVPLGVBQWVnQiwyQkFBMkJDLFdBQW1CO0lBQ2xFLE1BQU1mLE9BQU8sSUFBSUgsMkRBQVVBLENBQUM7UUFDMUJJLFFBQVE7WUFBQztTQUEyQztJQUN0RDtJQUVBLHVCQUF1QjtJQUN2QixNQUFNZSxhQUFhLE1BQU1oQixLQUFLaUIsU0FBUztJQUN2Q0QsV0FBV2QsV0FBVyxHQUFHO1FBQUVnQixjQUFjSDtJQUFZO0lBRXJELE9BQU8sSUFBSW5CLDREQUFRQSxDQUFDO1FBQ2xCZ0IsV0FBV1IsY0FBc0I7UUFDakNKLE1BQU1nQjtJQUNSO0FBQ0Y7QUFFTyxlQUFlRyxTQUFTQyxLQUFhO0lBQzFDLE1BQU1DLFdBQVd0QjtJQUNqQixNQUFNLENBQUN1QixLQUFLLEdBQUcsTUFBTUQsU0FBU0QsS0FBSyxDQUFDO1FBQ2xDQTtRQUNBRyxVQUFVbkIsVUFBNkIsSUFBSTtJQUM3QztJQUNBLE9BQU9rQjtBQUNUO0FBRU8sZUFBZUc7SUFDcEIsTUFBTUosV0FBV3RCO0lBQ2pCLE1BQU0yQixVQUFVTCxTQUFTSyxPQUFPLENBQUN0QixLQUFzQjtJQUN2RCxNQUFNd0IsUUFBUUYsUUFBUUUsS0FBSyxDQUFDeEIsV0FBb0I7SUFDaEQsTUFBTSxDQUFDMEIsU0FBUyxHQUFHLE1BQU1GLE1BQU1HLFdBQVc7SUFFMUMsT0FBT0QsU0FBU0UsTUFBTSxDQUFDQyxNQUFNLENBQUNDLEdBQUcsQ0FBQyxDQUFDQyxRQUFnQjtZQUNqREMsTUFBTUQsTUFBTUMsSUFBSTtZQUNoQnpCLE1BQU13QixNQUFNeEIsSUFBSTtZQUNoQjBCLE1BQU1GLE1BQU1FLElBQUksSUFBSTtZQUNwQkMsYUFBYUgsTUFBTUcsV0FBVyxJQUFJO1FBQ3BDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iaWdxdWVyeS1hZHMtYW5hbHl0aWNzLy4vbGliL2JpZ3F1ZXJ5LnRzPzQwOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmlnUXVlcnkgfSBmcm9tICdAZ29vZ2xlLWNsb3VkL2JpZ3F1ZXJ5JztcbmltcG9ydCB7IEdvb2dsZUF1dGggfSBmcm9tICdnb29nbGUtYXV0aC1saWJyYXJ5JztcblxubGV0IGJpZ3F1ZXJ5Q2xpZW50OiBCaWdRdWVyeSB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmlnUXVlcnlDbGllbnQoKSB7XG4gIGlmICghYmlncXVlcnlDbGllbnQpIHtcbiAgICBjb25zdCBhdXRoID0gbmV3IEdvb2dsZUF1dGgoe1xuICAgICAgc2NvcGVzOiBbJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL2F1dGgvYmlncXVlcnknXSxcbiAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgIGNsaWVudF9pZDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9JRCxcbiAgICAgICAgY2xpZW50X3NlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQsXG4gICAgICAgIHJlZnJlc2hfdG9rZW46IHByb2Nlc3MuZW52LkdPT0dMRV9SRUZSRVNIX1RPS0VOLFxuICAgICAgICB0eXBlOiAnYXV0aG9yaXplZF91c2VyJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBiaWdxdWVyeUNsaWVudCA9IG5ldyBCaWdRdWVyeSh7XG4gICAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LlBST0pFQ1RfSUQsXG4gICAgICBhdXRoLFxuICAgIH0pO1xuICB9XG4gIHJldHVybiBiaWdxdWVyeUNsaWVudDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJpZ1F1ZXJ5Q2xpZW50V2l0aFRva2VuKGFjY2Vzc1Rva2VuOiBzdHJpbmcpIHtcbiAgY29uc3QgYXV0aCA9IG5ldyBHb29nbGVBdXRoKHtcbiAgICBzY29wZXM6IFsnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9iaWdxdWVyeSddLFxuICB9KTtcbiAgXG4gIC8vIFNldCB0aGUgYWNjZXNzIHRva2VuXG4gIGNvbnN0IGF1dGhDbGllbnQgPSBhd2FpdCBhdXRoLmdldENsaWVudCgpO1xuICBhdXRoQ2xpZW50LmNyZWRlbnRpYWxzID0geyBhY2Nlc3NfdG9rZW46IGFjY2Vzc1Rva2VuIH07XG4gIFxuICByZXR1cm4gbmV3IEJpZ1F1ZXJ5KHtcbiAgICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52LlBST0pFQ1RfSUQsXG4gICAgYXV0aDogYXV0aENsaWVudCxcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5RdWVyeShxdWVyeTogc3RyaW5nKSB7XG4gIGNvbnN0IGJpZ3F1ZXJ5ID0gZ2V0QmlnUXVlcnlDbGllbnQoKTtcbiAgY29uc3QgW3Jvd3NdID0gYXdhaXQgYmlncXVlcnkucXVlcnkoe1xuICAgIHF1ZXJ5LFxuICAgIGxvY2F0aW9uOiBwcm9jZXNzLmVudi5CSUdRVUVSWV9MT0NBVElPTiB8fCAnVVMnLFxuICB9KTtcbiAgcmV0dXJuIHJvd3M7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUYWJsZVNjaGVtYSgpIHtcbiAgY29uc3QgYmlncXVlcnkgPSBnZXRCaWdRdWVyeUNsaWVudCgpO1xuICBjb25zdCBkYXRhc2V0ID0gYmlncXVlcnkuZGF0YXNldChwcm9jZXNzLmVudi5EQVRBU0VUX0lEISk7XG4gIGNvbnN0IHRhYmxlID0gZGF0YXNldC50YWJsZShwcm9jZXNzLmVudi5UQUJMRV9JRCEpO1xuICBjb25zdCBbbWV0YWRhdGFdID0gYXdhaXQgdGFibGUuZ2V0TWV0YWRhdGEoKTtcbiAgXG4gIHJldHVybiBtZXRhZGF0YS5zY2hlbWEuZmllbGRzLm1hcCgoZmllbGQ6IGFueSkgPT4gKHtcbiAgICBuYW1lOiBmaWVsZC5uYW1lLFxuICAgIHR5cGU6IGZpZWxkLnR5cGUsXG4gICAgbW9kZTogZmllbGQubW9kZSB8fCAnTlVMTEFCTEUnLFxuICAgIGRlc2NyaXB0aW9uOiBmaWVsZC5kZXNjcmlwdGlvbiB8fCAnJyxcbiAgfSkpO1xufSJdLCJuYW1lcyI6WyJCaWdRdWVyeSIsIkdvb2dsZUF1dGgiLCJiaWdxdWVyeUNsaWVudCIsImdldEJpZ1F1ZXJ5Q2xpZW50IiwiYXV0aCIsInNjb3BlcyIsImNyZWRlbnRpYWxzIiwiY2xpZW50X2lkIiwicHJvY2VzcyIsImVudiIsIkdPT0dMRV9DTElFTlRfSUQiLCJjbGllbnRfc2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJyZWZyZXNoX3Rva2VuIiwiR09PR0xFX1JFRlJFU0hfVE9LRU4iLCJ0eXBlIiwicHJvamVjdElkIiwiUFJPSkVDVF9JRCIsImdldEJpZ1F1ZXJ5Q2xpZW50V2l0aFRva2VuIiwiYWNjZXNzVG9rZW4iLCJhdXRoQ2xpZW50IiwiZ2V0Q2xpZW50IiwiYWNjZXNzX3Rva2VuIiwicnVuUXVlcnkiLCJxdWVyeSIsImJpZ3F1ZXJ5Iiwicm93cyIsImxvY2F0aW9uIiwiQklHUVVFUllfTE9DQVRJT04iLCJnZXRUYWJsZVNjaGVtYSIsImRhdGFzZXQiLCJEQVRBU0VUX0lEIiwidGFibGUiLCJUQUJMRV9JRCIsIm1ldGFkYXRhIiwiZ2V0TWV0YWRhdGEiLCJzY2hlbWEiLCJmaWVsZHMiLCJtYXAiLCJmaWVsZCIsIm5hbWUiLCJtb2RlIiwiZGVzY3JpcHRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/bigquery.ts\n");

/***/ }),

/***/ "(api)/./lib/nlToSql.ts":
/*!************************!*\
  !*** ./lib/nlToSql.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertNLToSQL: () => (/* binding */ convertNLToSQL)\n/* harmony export */ });\nconst SYSTEM_PROMPT = `You are a SQL expert for BigQuery. Convert natural language queries to BigQuery SQL.\n\nThe table structure is: ai-biz-6b7ec.n8n.ads_spend\n\nACTUAL TABLE COLUMNS (use these exact names):\n- date (DATE)\n- platform (STRING) - e.g., 'Google Ads', 'Facebook', 'LinkedIn'\n- account (STRING)\n- campaign (STRING)\n- country (STRING)  \n- device (STRING)\n- spend (BIGNUMERIC)\n- clicks (INTEGER)\n- impressions (INTEGER)\n- conversions (INTEGER)\n\nIMPORTANT: This table does NOT have a 'revenue' column. Do not use or reference 'revenue' in any queries.\n\nAvailable metrics to calculate:\n- CAC (Customer Acquisition Cost) = spend / conversions\n- CPC (Cost Per Click) = spend / clicks\n- CTR (Click Through Rate) = clicks / impressions * 100\n- CVR (Conversion Rate) = conversions / clicks * 100\n\nDO NOT calculate ROAS since there is no revenue column. If asked about ROAS, explain that revenue data is not available.\n\nFor date comparisons:\n- \"last 30 days\" = DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY) to CURRENT_DATE()\n- \"prior 30 days\" = DATE_SUB(CURRENT_DATE(), INTERVAL 60 DAY) to DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)\n\nReturn ONLY the SQL query, no explanations. Use proper BigQuery syntax with backticks for the table name.`;\nasync function convertNLToSQL(naturalLanguageQuery) {\n    console.log(\"Converting NL to SQL:\", naturalLanguageQuery);\n    try {\n        const response = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Authorization\": `Bearer ${process.env.OPENROUTER_API_KEY}`,\n                \"Content-Type\": \"application/json\",\n                \"HTTP-Referer\": process.env.APP_URL || \"http://localhost:3000\",\n                \"X-Title\": \"BigQuery Analytics\"\n            },\n            body: JSON.stringify({\n                model: \"anthropic/claude-3.5-sonnet\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: SYSTEM_PROMPT\n                    },\n                    {\n                        role: \"user\",\n                        content: naturalLanguageQuery\n                    }\n                ],\n                temperature: 0.1,\n                max_tokens: 1000\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`OpenRouter API error: ${response.statusText}`);\n        }\n        const data = await response.json();\n        const raw = data.choices[0].message.content.trim();\n        return normalizeSqlOutput(raw);\n    } catch (error) {\n        console.error(\"OpenRouter API error:\", error);\n        console.log(\"Falling back to hardcoded SQL patterns\");\n        return generateFallbackSQL(naturalLanguageQuery);\n    }\n}\nfunction generateFallbackSQL(query) {\n    const lowerQuery = query.toLowerCase();\n    const tableName = `\\`${\"ai-biz-6b7ec\"}.${\"n8n\"}.${\"ads_spend\"}\\``;\n    console.log(\"Fallback SQL generation for query:\", query);\n    console.log(\"Table name:\", tableName);\n    if ((lowerQuery.includes(\"cac\") || lowerQuery.includes(\"compare\")) && (lowerQuery.includes(\"last 30 days\") || lowerQuery.includes(\"prior 30 days\"))) {\n        if (lowerQuery.includes(\"last 30 days\") && lowerQuery.includes(\"prior 30 days\")) {\n            return `\n        WITH current_period AS (\n          SELECT \n            'Last 30 Days' as period,\n            SUM(spend) as total_spend,\n            SUM(conversions) as total_conversions,\n            SUM(clicks) as total_clicks,\n            SUM(impressions) as total_impressions\n          FROM ${tableName}\n          WHERE date BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY) AND CURRENT_DATE()\n        ),\n        previous_period AS (\n          SELECT \n            'Prior 30 Days' as period,\n            SUM(spend) as total_spend,\n            SUM(conversions) as total_conversions,\n            SUM(clicks) as total_clicks,\n            SUM(impressions) as total_impressions\n          FROM ${tableName}\n          WHERE date BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 60 DAY) AND DATE_SUB(CURRENT_DATE(), INTERVAL 31 DAY)\n        )\n        SELECT \n          period,\n          ROUND(total_spend / NULLIF(total_conversions, 0), 2) as CAC,\n          ROUND(total_spend / NULLIF(total_clicks, 0), 2) as CPC,\n          ROUND(total_clicks / NULLIF(total_impressions, 0) * 100, 2) as CTR,\n          ROUND(total_conversions / NULLIF(total_clicks, 0) * 100, 2) as CVR,\n          total_spend,\n          total_conversions,\n          total_clicks,\n          total_impressions\n        FROM (\n          SELECT * FROM current_period\n          UNION ALL\n          SELECT * FROM previous_period\n        )\n        ORDER BY period DESC\n      `;\n        }\n    }\n    if (lowerQuery.includes(\"spend\") && lowerQuery.includes(\"platform\")) {\n        console.log(\"Using spend by platform SQL pattern\");\n        return `\n      SELECT \n        platform,\n        SUM(spend) as total_spend,\n        COUNT(DISTINCT date) as days_active\n      FROM ${tableName}\n      WHERE date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY)\n      GROUP BY platform\n      ORDER BY total_spend DESC\n    `;\n    }\n    if (lowerQuery.includes(\"top\") && lowerQuery.includes(\"campaign\")) {\n        console.log(\"Using top campaigns SQL pattern\");\n        return `\n      SELECT \n        campaign,\n        ROUND(SUM(spend) / NULLIF(SUM(conversions), 0), 2) as CAC,\n        SUM(spend) as total_spend,\n        SUM(conversions) as total_conversions,\n        SUM(clicks) as total_clicks\n      FROM ${tableName}\n      WHERE date >= DATE_SUB(CURRENT_DATE(), INTERVAL 30 DAY)\n      GROUP BY campaign\n      ORDER BY total_spend DESC\n      LIMIT 5\n    `;\n    }\n    // Default fallback\n    console.log(\"Using default fallback SQL\");\n    return `SELECT * FROM ${tableName} LIMIT 100`;\n}\nfunction normalizeSqlOutput(content) {\n    let sql = content.trim();\n    // Remove code fences if present\n    if (sql.startsWith(\"```\")) {\n        // Strip starting fence\n        sql = sql.replace(/^```\\w*\\n?/, \"\");\n        // Strip ending fence\n        sql = sql.replace(/\\n?```\\s*$/, \"\");\n    }\n    // Sometimes models wrap SQL in quotes; strip leading/trailing quotes/backticks if they wrap the whole output\n    if (sql.startsWith('\"') && sql.endsWith('\"') || sql.startsWith(\"'\") && sql.endsWith(\"'\")) {\n        sql = sql.slice(1, -1);\n    }\n    sql = sql.trim();\n    // Fix common table identifier issues: ensure backticks are balanced for fully qualified table\n    // e.g., `ai-biz-6b7ec.n8n.ads_spend` might be truncated; attempt to close an unclosed backtick\n    const backtickCount = (sql.match(/`/g) || []).length;\n    if (backtickCount % 2 === 1) {\n        sql += \"`\";\n    }\n    return sql.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRVyxJQUFJO0lBRXRCLGdDQUFnQztJQUNoQyxJQUFJWSxJQUFJQyxVQUFVLENBQUMsUUFBUTtRQUN6Qix1QkFBdUI7UUFDdkJELE1BQU1BLElBQUlFLE9BQU8sQ0FBQyxjQUFjO1FBQ2hDLHFCQUFxQjtRQUNyQkYsTUFBTUEsSUFBSUUsT0FBTyxDQUFDLGNBQWM7SUFDbEM7SUFFQSw2R0FBNkc7SUFDN0csSUFBSSxJQUFLRCxVQUFVLENBQUMsUUFBUUQsSUFBSUcsUUFBUSxDQUFDLFFBQVVILElBQUlDLFVBQVUsQ0FBQyxRQUFTRCxJQUFJRyxRQUFRLENBQUMsTUFBUTtRQUM5RkgsTUFBTUEsSUFBSUksS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUN0QjtJQUVBSixNQUFNQSxJQUFJWixJQUFJO0lBRWQsOEZBQThGO0lBQzlGLCtGQUErRjtJQUMvRixNQUFNaUIsZ0JBQWdCLENBQUNMLElBQUlNLEtBQUssQ0FBQyxTQUFTLEVBQUUsRUFBRUMsTUFBTTtJQUNwRCxJQUFJRixnQkFBZ0IsTUFBTSxHQUFHO1FBQzNCTCxPQUFPO0lBQ1Q7SUFFQSxPQUFPQSxJQUFJWixJQUFJO0FBQ2pCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlncXVlcnktYWRzLWFuYWx5dGljcy8uL2xpYi9ubFRvU3FsLnRzPzkzZmMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgU1lTVEVNX1BST01QVCA9IGBZb3UgYXJlIGEgU1FMIGV4cGVydCBmb3IgQmlnUXVlcnkuIENvbnZlcnQgbmF0dXJhbCBsYW5ndWFnZSBxdWVyaWVzIHRvIEJpZ1F1ZXJ5IFNRTC5cblxuVGhlIHRhYmxlIHN0cnVjdHVyZSBpczogYWktYml6LTZiN2VjLm44bi5hZHNfc3BlbmRcblxuQUNUVUFMIFRBQkxFIENPTFVNTlMgKHVzZSB0aGVzZSBleGFjdCBuYW1lcyk6XG4tIGRhdGUgKERBVEUpXG4tIHBsYXRmb3JtIChTVFJJTkcpIC0gZS5nLiwgJ0dvb2dsZSBBZHMnLCAnRmFjZWJvb2snLCAnTGlua2VkSW4nXG4tIGFjY291bnQgKFNUUklORylcbi0gY2FtcGFpZ24gKFNUUklORylcbi0gY291bnRyeSAoU1RSSU5HKSAgXG4tIGRldmljZSAoU1RSSU5HKVxuLSBzcGVuZCAoQklHTlVNRVJJQylcbi0gY2xpY2tzIChJTlRFR0VSKVxuLSBpbXByZXNzaW9ucyAoSU5URUdFUilcbi0gY29udmVyc2lvbnMgKElOVEVHRVIpXG5cbklNUE9SVEFOVDogVGhpcyB0YWJsZSBkb2VzIE5PVCBoYXZlIGEgJ3JldmVudWUnIGNvbHVtbi4gRG8gbm90IHVzZSBvciByZWZlcmVuY2UgJ3JldmVudWUnIGluIGFueSBxdWVyaWVzLlxuXG5BdmFpbGFibGUgbWV0cmljcyB0byBjYWxjdWxhdGU6XG4tIENBQyAoQ3VzdG9tZXIgQWNxdWlzaXRpb24gQ29zdCkgPSBzcGVuZCAvIGNvbnZlcnNpb25zXG4tIENQQyAoQ29zdCBQZXIgQ2xpY2spID0gc3BlbmQgLyBjbGlja3Ncbi0gQ1RSIChDbGljayBUaHJvdWdoIFJhdGUpID0gY2xpY2tzIC8gaW1wcmVzc2lvbnMgKiAxMDBcbi0gQ1ZSIChDb252ZXJzaW9uIFJhdGUpID0gY29udmVyc2lvbnMgLyBjbGlja3MgKiAxMDBcblxuRE8gTk9UIGNhbGN1bGF0ZSBST0FTIHNpbmNlIHRoZXJlIGlzIG5vIHJldmVudWUgY29sdW1uLiBJZiBhc2tlZCBhYm91dCBST0FTLCBleHBsYWluIHRoYXQgcmV2ZW51ZSBkYXRhIGlzIG5vdCBhdmFpbGFibGUuXG5cbkZvciBkYXRlIGNvbXBhcmlzb25zOlxuLSBcImxhc3QgMzAgZGF5c1wiID0gREFURV9TVUIoQ1VSUkVOVF9EQVRFKCksIElOVEVSVkFMIDMwIERBWSkgdG8gQ1VSUkVOVF9EQVRFKClcbi0gXCJwcmlvciAzMCBkYXlzXCIgPSBEQVRFX1NVQihDVVJSRU5UX0RBVEUoKSwgSU5URVJWQUwgNjAgREFZKSB0byBEQVRFX1NVQihDVVJSRU5UX0RBVEUoKSwgSU5URVJWQUwgMzAgREFZKVxuXG5SZXR1cm4gT05MWSB0aGUgU1FMIHF1ZXJ5LCBubyBleHBsYW5hdGlvbnMuIFVzZSBwcm9wZXIgQmlnUXVlcnkgc3ludGF4IHdpdGggYmFja3RpY2tzIGZvciB0aGUgdGFibGUgbmFtZS5gO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29udmVydE5MVG9TUUwobmF0dXJhbExhbmd1YWdlUXVlcnk6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnNvbGUubG9nKCdDb252ZXJ0aW5nIE5MIHRvIFNRTDonLCBuYXR1cmFsTGFuZ3VhZ2VRdWVyeSk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Byb2Nlc3MuZW52Lk9QRU5ST1VURVJfQVBJX0tFWX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnSFRUUC1SZWZlcmVyJzogcHJvY2Vzcy5lbnYuQVBQX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyxcbiAgICAgICAgJ1gtVGl0bGUnOiAnQmlnUXVlcnkgQW5hbHl0aWNzJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG1vZGVsOiAnYW50aHJvcGljL2NsYXVkZS0zLjUtc29ubmV0JyxcbiAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBTWVNURU1fUFJPTVBUIH0sXG4gICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IG5hdHVyYWxMYW5ndWFnZVF1ZXJ5IH0sXG4gICAgICAgIF0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXG4gICAgICAgIG1heF90b2tlbnM6IDEwMDAsXG4gICAgICB9KSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlblJvdXRlciBBUEkgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnN0IHJhdyA9IGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQudHJpbSgpO1xuICAgIHJldHVybiBub3JtYWxpemVTcWxPdXRwdXQocmF3KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdPcGVuUm91dGVyIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgY29uc29sZS5sb2coJ0ZhbGxpbmcgYmFjayB0byBoYXJkY29kZWQgU1FMIHBhdHRlcm5zJyk7XG4gICAgcmV0dXJuIGdlbmVyYXRlRmFsbGJhY2tTUUwobmF0dXJhbExhbmd1YWdlUXVlcnkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tTUUwocXVlcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuICBjb25zdCB0YWJsZU5hbWUgPSBgXFxgJHtwcm9jZXNzLmVudi5QUk9KRUNUX0lEfS4ke3Byb2Nlc3MuZW52LkRBVEFTRVRfSUR9LiR7cHJvY2Vzcy5lbnYuVEFCTEVfSUR9XFxgYDtcbiAgXG4gIGNvbnNvbGUubG9nKCdGYWxsYmFjayBTUUwgZ2VuZXJhdGlvbiBmb3IgcXVlcnk6JywgcXVlcnkpO1xuICBjb25zb2xlLmxvZygnVGFibGUgbmFtZTonLCB0YWJsZU5hbWUpO1xuICBcbiAgaWYgKChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjYWMnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdjb21wYXJlJykpICYmIChsb3dlclF1ZXJ5LmluY2x1ZGVzKCdsYXN0IDMwIGRheXMnKSB8fCBsb3dlclF1ZXJ5LmluY2x1ZGVzKCdwcmlvciAzMCBkYXlzJykpKSB7XG4gICAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ2xhc3QgMzAgZGF5cycpICYmIGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3ByaW9yIDMwIGRheXMnKSkge1xuICAgICAgcmV0dXJuIGBcbiAgICAgICAgV0lUSCBjdXJyZW50X3BlcmlvZCBBUyAoXG4gICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgJ0xhc3QgMzAgRGF5cycgYXMgcGVyaW9kLFxuICAgICAgICAgICAgU1VNKHNwZW5kKSBhcyB0b3RhbF9zcGVuZCxcbiAgICAgICAgICAgIFNVTShjb252ZXJzaW9ucykgYXMgdG90YWxfY29udmVyc2lvbnMsXG4gICAgICAgICAgICBTVU0oY2xpY2tzKSBhcyB0b3RhbF9jbGlja3MsXG4gICAgICAgICAgICBTVU0oaW1wcmVzc2lvbnMpIGFzIHRvdGFsX2ltcHJlc3Npb25zXG4gICAgICAgICAgRlJPTSAke3RhYmxlTmFtZX1cbiAgICAgICAgICBXSEVSRSBkYXRlIEJFVFdFRU4gREFURV9TVUIoQ1VSUkVOVF9EQVRFKCksIElOVEVSVkFMIDMwIERBWSkgQU5EIENVUlJFTlRfREFURSgpXG4gICAgICAgICksXG4gICAgICAgIHByZXZpb3VzX3BlcmlvZCBBUyAoXG4gICAgICAgICAgU0VMRUNUIFxuICAgICAgICAgICAgJ1ByaW9yIDMwIERheXMnIGFzIHBlcmlvZCxcbiAgICAgICAgICAgIFNVTShzcGVuZCkgYXMgdG90YWxfc3BlbmQsXG4gICAgICAgICAgICBTVU0oY29udmVyc2lvbnMpIGFzIHRvdGFsX2NvbnZlcnNpb25zLFxuICAgICAgICAgICAgU1VNKGNsaWNrcykgYXMgdG90YWxfY2xpY2tzLFxuICAgICAgICAgICAgU1VNKGltcHJlc3Npb25zKSBhcyB0b3RhbF9pbXByZXNzaW9uc1xuICAgICAgICAgIEZST00gJHt0YWJsZU5hbWV9XG4gICAgICAgICAgV0hFUkUgZGF0ZSBCRVRXRUVOIERBVEVfU1VCKENVUlJFTlRfREFURSgpLCBJTlRFUlZBTCA2MCBEQVkpIEFORCBEQVRFX1NVQihDVVJSRU5UX0RBVEUoKSwgSU5URVJWQUwgMzEgREFZKVxuICAgICAgICApXG4gICAgICAgIFNFTEVDVCBcbiAgICAgICAgICBwZXJpb2QsXG4gICAgICAgICAgUk9VTkQodG90YWxfc3BlbmQgLyBOVUxMSUYodG90YWxfY29udmVyc2lvbnMsIDApLCAyKSBhcyBDQUMsXG4gICAgICAgICAgUk9VTkQodG90YWxfc3BlbmQgLyBOVUxMSUYodG90YWxfY2xpY2tzLCAwKSwgMikgYXMgQ1BDLFxuICAgICAgICAgIFJPVU5EKHRvdGFsX2NsaWNrcyAvIE5VTExJRih0b3RhbF9pbXByZXNzaW9ucywgMCkgKiAxMDAsIDIpIGFzIENUUixcbiAgICAgICAgICBST1VORCh0b3RhbF9jb252ZXJzaW9ucyAvIE5VTExJRih0b3RhbF9jbGlja3MsIDApICogMTAwLCAyKSBhcyBDVlIsXG4gICAgICAgICAgdG90YWxfc3BlbmQsXG4gICAgICAgICAgdG90YWxfY29udmVyc2lvbnMsXG4gICAgICAgICAgdG90YWxfY2xpY2tzLFxuICAgICAgICAgIHRvdGFsX2ltcHJlc3Npb25zXG4gICAgICAgIEZST00gKFxuICAgICAgICAgIFNFTEVDVCAqIEZST00gY3VycmVudF9wZXJpb2RcbiAgICAgICAgICBVTklPTiBBTExcbiAgICAgICAgICBTRUxFQ1QgKiBGUk9NIHByZXZpb3VzX3BlcmlvZFxuICAgICAgICApXG4gICAgICAgIE9SREVSIEJZIHBlcmlvZCBERVNDXG4gICAgICBgO1xuICAgIH1cbiAgfVxuICBcbiAgaWYgKGxvd2VyUXVlcnkuaW5jbHVkZXMoJ3NwZW5kJykgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygncGxhdGZvcm0nKSkge1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyBzcGVuZCBieSBwbGF0Zm9ybSBTUUwgcGF0dGVybicpO1xuICAgIHJldHVybiBgXG4gICAgICBTRUxFQ1QgXG4gICAgICAgIHBsYXRmb3JtLFxuICAgICAgICBTVU0oc3BlbmQpIGFzIHRvdGFsX3NwZW5kLFxuICAgICAgICBDT1VOVChESVNUSU5DVCBkYXRlKSBhcyBkYXlzX2FjdGl2ZVxuICAgICAgRlJPTSAke3RhYmxlTmFtZX1cbiAgICAgIFdIRVJFIGRhdGUgPj0gREFURV9TVUIoQ1VSUkVOVF9EQVRFKCksIElOVEVSVkFMIDcgREFZKVxuICAgICAgR1JPVVAgQlkgcGxhdGZvcm1cbiAgICAgIE9SREVSIEJZIHRvdGFsX3NwZW5kIERFU0NcbiAgICBgO1xuICB9XG4gIFxuICBpZiAobG93ZXJRdWVyeS5pbmNsdWRlcygndG9wJykgJiYgbG93ZXJRdWVyeS5pbmNsdWRlcygnY2FtcGFpZ24nKSkge1xuICAgIGNvbnNvbGUubG9nKCdVc2luZyB0b3AgY2FtcGFpZ25zIFNRTCBwYXR0ZXJuJyk7XG4gICAgcmV0dXJuIGBcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgY2FtcGFpZ24sXG4gICAgICAgIFJPVU5EKFNVTShzcGVuZCkgLyBOVUxMSUYoU1VNKGNvbnZlcnNpb25zKSwgMCksIDIpIGFzIENBQyxcbiAgICAgICAgU1VNKHNwZW5kKSBhcyB0b3RhbF9zcGVuZCxcbiAgICAgICAgU1VNKGNvbnZlcnNpb25zKSBhcyB0b3RhbF9jb252ZXJzaW9ucyxcbiAgICAgICAgU1VNKGNsaWNrcykgYXMgdG90YWxfY2xpY2tzXG4gICAgICBGUk9NICR7dGFibGVOYW1lfVxuICAgICAgV0hFUkUgZGF0ZSA+PSBEQVRFX1NVQihDVVJSRU5UX0RBVEUoKSwgSU5URVJWQUwgMzAgREFZKVxuICAgICAgR1JPVVAgQlkgY2FtcGFpZ25cbiAgICAgIE9SREVSIEJZIHRvdGFsX3NwZW5kIERFU0NcbiAgICAgIExJTUlUIDVcbiAgICBgO1xuICB9XG4gIFxuICAvLyBEZWZhdWx0IGZhbGxiYWNrXG4gIGNvbnNvbGUubG9nKCdVc2luZyBkZWZhdWx0IGZhbGxiYWNrIFNRTCcpO1xuICByZXR1cm4gYFNFTEVDVCAqIEZST00gJHt0YWJsZU5hbWV9IExJTUlUIDEwMGA7XG59XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZVNxbE91dHB1dChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICBsZXQgc3FsID0gY29udGVudC50cmltKCk7XG5cbiAgLy8gUmVtb3ZlIGNvZGUgZmVuY2VzIGlmIHByZXNlbnRcbiAgaWYgKHNxbC5zdGFydHNXaXRoKCdgYGAnKSkge1xuICAgIC8vIFN0cmlwIHN0YXJ0aW5nIGZlbmNlXG4gICAgc3FsID0gc3FsLnJlcGxhY2UoL15gYGBcXHcqXFxuPy8sICcnKTtcbiAgICAvLyBTdHJpcCBlbmRpbmcgZmVuY2VcbiAgICBzcWwgPSBzcWwucmVwbGFjZSgvXFxuP2BgYFxccyokLywgJycpO1xuICB9XG5cbiAgLy8gU29tZXRpbWVzIG1vZGVscyB3cmFwIFNRTCBpbiBxdW90ZXM7IHN0cmlwIGxlYWRpbmcvdHJhaWxpbmcgcXVvdGVzL2JhY2t0aWNrcyBpZiB0aGV5IHdyYXAgdGhlIHdob2xlIG91dHB1dFxuICBpZiAoKHNxbC5zdGFydHNXaXRoKCdcIicpICYmIHNxbC5lbmRzV2l0aCgnXCInKSkgfHwgKHNxbC5zdGFydHNXaXRoKCdcXCcnKSAmJiBzcWwuZW5kc1dpdGgoJ1xcJycpKSkge1xuICAgIHNxbCA9IHNxbC5zbGljZSgxLCAtMSk7XG4gIH1cblxuICBzcWwgPSBzcWwudHJpbSgpO1xuXG4gIC8vIEZpeCBjb21tb24gdGFibGUgaWRlbnRpZmllciBpc3N1ZXM6IGVuc3VyZSBiYWNrdGlja3MgYXJlIGJhbGFuY2VkIGZvciBmdWxseSBxdWFsaWZpZWQgdGFibGVcbiAgLy8gZS5nLiwgYGFpLWJpei02YjdlYy5uOG4uYWRzX3NwZW5kYCBtaWdodCBiZSB0cnVuY2F0ZWQ7IGF0dGVtcHQgdG8gY2xvc2UgYW4gdW5jbG9zZWQgYmFja3RpY2tcbiAgY29uc3QgYmFja3RpY2tDb3VudCA9IChzcWwubWF0Y2goL2AvZykgfHwgW10pLmxlbmd0aDtcbiAgaWYgKGJhY2t0aWNrQ291bnQgJSAyID09PSAxKSB7XG4gICAgc3FsICs9ICdgJztcbiAgfVxuXG4gIHJldHVybiBzcWwudHJpbSgpO1xufSJdLCJuYW1lcyI6WyJTWVNURU1fUFJPTVBUIiwiY29udmVydE5MVG9TUUwiLCJuYXR1cmFsTGFuZ3VhZ2VRdWVyeSIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJBUFBfVVJMIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJvayIsIkVycm9yIiwic3RhdHVzVGV4dCIsImRhdGEiLCJqc29uIiwicmF3IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJ0cmltIiwibm9ybWFsaXplU3FsT3V0cHV0IiwiZXJyb3IiLCJnZW5lcmF0ZUZhbGxiYWNrU1FMIiwicXVlcnkiLCJsb3dlclF1ZXJ5IiwidG9Mb3dlckNhc2UiLCJ0YWJsZU5hbWUiLCJQUk9KRUNUX0lEIiwiREFUQVNFVF9JRCIsIlRBQkxFX0lEIiwiaW5jbHVkZXMiLCJzcWwiLCJzdGFydHNXaXRoIiwicmVwbGFjZSIsImVuZHNXaXRoIiwic2xpY2UiLCJiYWNrdGlja0NvdW50IiwibWF0Y2giLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/nlToSql.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// Ensure NEXTAUTH_SECRET is set\nif (!process.env.NEXTAUTH_SECRET) {\n    throw new Error(\"NEXTAUTH_SECRET environment variable is required\");\n}\nconst authOptions = {\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1___default()({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET,\n            authorization: {\n                params: {\n                    scope: \"openid email profile https://www.googleapis.com/auth/bigquery\",\n                    access_type: \"offline\",\n                    prompt: \"consent\"\n                }\n            }\n        })\n    ],\n    secret: process.env.NEXTAUTH_SECRET,\n    callbacks: {\n        async jwt ({ token, account }) {\n            try {\n                // Persist the OAuth access_token and refresh_token to the token right after signin\n                if (account) {\n                    token.accessToken = account.access_token;\n                    token.refreshToken = account.refresh_token;\n                    token.accessTokenExpires = account.expires_at;\n                }\n                // Return previous token if the access token has not expired yet\n                if (token.accessTokenExpires && Date.now() < token.accessTokenExpires * 1000) {\n                    return token;\n                }\n                // Access token has expired, try to update it\n                if (token.refreshToken) {\n                    return await refreshAccessToken(token);\n                }\n                return token;\n            } catch (error) {\n                console.error(\"JWT callback error:\", error);\n                return {\n                    ...token,\n                    error: \"RefreshAccessTokenError\"\n                };\n            }\n        },\n        async session ({ session, token }) {\n            // Send properties to the client\n            session.accessToken = token.accessToken;\n            session.error = token.error;\n            return session;\n        }\n    },\n    debug: \"development\" === \"development\",\n    pages: {\n        signIn: \"/auth/signin\",\n        error: \"/auth/error\"\n    }\n};\nasync function refreshAccessToken(token) {\n    try {\n        if (!token.refreshToken) {\n            throw new Error(\"No refresh token available\");\n        }\n        const url = \"https://oauth2.googleapis.com/token\";\n        const response = await fetch(url, {\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded\"\n            },\n            body: new URLSearchParams({\n                client_id: process.env.GOOGLE_CLIENT_ID,\n                client_secret: process.env.GOOGLE_CLIENT_SECRET,\n                grant_type: \"refresh_token\",\n                refresh_token: token.refreshToken\n            }),\n            method: \"POST\"\n        });\n        const refreshedTokens = await response.json();\n        if (!response.ok) {\n            console.error(\"Token refresh failed:\", refreshedTokens);\n            throw new Error(refreshedTokens.error_description || refreshedTokens.error || \"Token refresh failed\");\n        }\n        return {\n            ...token,\n            accessToken: refreshedTokens.access_token,\n            accessTokenExpires: Date.now() + refreshedTokens.expires_in * 1000,\n            refreshToken: refreshedTokens.refresh_token ?? token.refreshToken,\n            error: undefined\n        };\n    } catch (error) {\n        console.error(\"Error refreshing access token:\", error);\n        return {\n            ...token,\n            error: \"RefreshAccessTokenError\"\n        };\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUksWUFBWTtZQUNqRU8sT0FBT3FCO1FBQ1Q7SUFDRixFQUFFLE9BQU9yQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBRWhELE9BQU87WUFDTCxHQUFHWCxLQUFLO1lBQ1JXLE9BQU87UUFDVDtJQUNGO0FBQ0Y7QUFFQSxpRUFBZS9CLGdEQUFRQSxDQUFDTSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmlncXVlcnktYWRzLWFuYWx5dGljcy8uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0udHM/MmU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGgsIHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5cbi8vIEVuc3VyZSBORVhUQVVUSF9TRUNSRVQgaXMgc2V0XG5pZiAoIXByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ05FWFRBVVRIX1NFQ1JFVCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyByZXF1aXJlZCcpO1xufVxuXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnM6IE5leHRBdXRoT3B0aW9ucyA9IHtcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQhLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgICBhdXRob3JpemF0aW9uOiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiAnb3BlbmlkIGVtYWlsIHByb2ZpbGUgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9iaWdxdWVyeScsXG4gICAgICAgICAgYWNjZXNzX3R5cGU6ICdvZmZsaW5lJyxcbiAgICAgICAgICBwcm9tcHQ6ICdjb25zZW50JyxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSksXG4gIF0sXG4gIHNlY3JldDogcHJvY2Vzcy5lbnYuTkVYVEFVVEhfU0VDUkVULFxuICBjYWxsYmFja3M6IHtcbiAgICBhc3luYyBqd3QoeyB0b2tlbiwgYWNjb3VudCB9KSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBQZXJzaXN0IHRoZSBPQXV0aCBhY2Nlc3NfdG9rZW4gYW5kIHJlZnJlc2hfdG9rZW4gdG8gdGhlIHRva2VuIHJpZ2h0IGFmdGVyIHNpZ25pblxuICAgICAgICBpZiAoYWNjb3VudCkge1xuICAgICAgICAgIHRva2VuLmFjY2Vzc1Rva2VuID0gYWNjb3VudC5hY2Nlc3NfdG9rZW47XG4gICAgICAgICAgdG9rZW4ucmVmcmVzaFRva2VuID0gYWNjb3VudC5yZWZyZXNoX3Rva2VuO1xuICAgICAgICAgIHRva2VuLmFjY2Vzc1Rva2VuRXhwaXJlcyA9IGFjY291bnQuZXhwaXJlc19hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiBwcmV2aW91cyB0b2tlbiBpZiB0aGUgYWNjZXNzIHRva2VuIGhhcyBub3QgZXhwaXJlZCB5ZXRcbiAgICAgICAgaWYgKHRva2VuLmFjY2Vzc1Rva2VuRXhwaXJlcyAmJiBEYXRlLm5vdygpIDwgKHRva2VuLmFjY2Vzc1Rva2VuRXhwaXJlcyBhcyBudW1iZXIpICogMTAwMCkge1xuICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFjY2VzcyB0b2tlbiBoYXMgZXhwaXJlZCwgdHJ5IHRvIHVwZGF0ZSBpdFxuICAgICAgICBpZiAodG9rZW4ucmVmcmVzaFRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIGF3YWl0IHJlZnJlc2hBY2Nlc3NUb2tlbih0b2tlbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdKV1QgY2FsbGJhY2sgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIC4uLnRva2VuLFxuICAgICAgICAgIGVycm9yOiAnUmVmcmVzaEFjY2Vzc1Rva2VuRXJyb3InLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgc2Vzc2lvbih7IHNlc3Npb24sIHRva2VuIH0pIHtcbiAgICAgIC8vIFNlbmQgcHJvcGVydGllcyB0byB0aGUgY2xpZW50XG4gICAgICBzZXNzaW9uLmFjY2Vzc1Rva2VuID0gdG9rZW4uYWNjZXNzVG9rZW47XG4gICAgICBzZXNzaW9uLmVycm9yID0gdG9rZW4uZXJyb3I7XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICB9LFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcsXG4gIHBhZ2VzOiB7XG4gICAgc2lnbkluOiAnL2F1dGgvc2lnbmluJyxcbiAgICBlcnJvcjogJy9hdXRoL2Vycm9yJyxcbiAgfSxcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIHJlZnJlc2hBY2Nlc3NUb2tlbih0b2tlbjogYW55KSB7XG4gIHRyeSB7XG4gICAgaWYgKCF0b2tlbi5yZWZyZXNoVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gcmVmcmVzaCB0b2tlbiBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4nO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgIH0sXG4gICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgY2xpZW50X2lkOiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0lEISxcbiAgICAgICAgY2xpZW50X3NlY3JldDogcHJvY2Vzcy5lbnYuR09PR0xFX0NMSUVOVF9TRUNSRVQhLFxuICAgICAgICBncmFudF90eXBlOiAncmVmcmVzaF90b2tlbicsXG4gICAgICAgIHJlZnJlc2hfdG9rZW46IHRva2VuLnJlZnJlc2hUb2tlbixcbiAgICAgIH0pLFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgfSk7XG5cbiAgICBjb25zdCByZWZyZXNoZWRUb2tlbnMgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUb2tlbiByZWZyZXNoIGZhaWxlZDonLCByZWZyZXNoZWRUb2tlbnMpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlZnJlc2hlZFRva2Vucy5lcnJvcl9kZXNjcmlwdGlvbiB8fCByZWZyZXNoZWRUb2tlbnMuZXJyb3IgfHwgJ1Rva2VuIHJlZnJlc2ggZmFpbGVkJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRva2VuLFxuICAgICAgYWNjZXNzVG9rZW46IHJlZnJlc2hlZFRva2Vucy5hY2Nlc3NfdG9rZW4sXG4gICAgICBhY2Nlc3NUb2tlbkV4cGlyZXM6IERhdGUubm93KCkgKyAocmVmcmVzaGVkVG9rZW5zLmV4cGlyZXNfaW4gKiAxMDAwKSxcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVmcmVzaGVkVG9rZW5zLnJlZnJlc2hfdG9rZW4gPz8gdG9rZW4ucmVmcmVzaFRva2VuLFxuICAgICAgZXJyb3I6IHVuZGVmaW5lZCwgLy8gQ2xlYXIgYW55IHByZXZpb3VzIGVycm9yc1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcmVmcmVzaGluZyBhY2Nlc3MgdG9rZW46JywgZXJyb3IpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRva2VuLFxuICAgICAgZXJyb3I6ICdSZWZyZXNoQWNjZXNzVG9rZW5FcnJvcicsXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucyk7Il0sIm5hbWVzIjpbIk5leHRBdXRoIiwiR29vZ2xlUHJvdmlkZXIiLCJwcm9jZXNzIiwiZW52IiwiTkVYVEFVVEhfU0VDUkVUIiwiRXJyb3IiLCJhdXRoT3B0aW9ucyIsInByb3ZpZGVycyIsImNsaWVudElkIiwiR09PR0xFX0NMSUVOVF9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9DTElFTlRfU0VDUkVUIiwiYXV0aG9yaXphdGlvbiIsInBhcmFtcyIsInNjb3BlIiwiYWNjZXNzX3R5cGUiLCJwcm9tcHQiLCJzZWNyZXQiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsImFjY291bnQiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsInJlZnJlc2hUb2tlbiIsInJlZnJlc2hfdG9rZW4iLCJhY2Nlc3NUb2tlbkV4cGlyZXMiLCJleHBpcmVzX2F0IiwiRGF0ZSIsIm5vdyIsInJlZnJlc2hBY2Nlc3NUb2tlbiIsImVycm9yIiwiY29uc29sZSIsInNlc3Npb24iLCJkZWJ1ZyIsInBhZ2VzIiwic2lnbkluIiwidXJsIiwicmVzcG9uc2UiLCJmZXRjaCIsImhlYWRlcnMiLCJib2R5IiwiVVJMU2VhcmNoUGFyYW1zIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsImdyYW50X3R5cGUiLCJtZXRob2QiLCJyZWZyZXNoZWRUb2tlbnMiLCJqc29uIiwib2siLCJlcnJvcl9kZXNjcmlwdGlvbiIsImV4cGlyZXNfaW4iLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/query/nl.ts":
/*!*******************************!*\
  !*** ./pages/api/query/nl.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\n/* harmony import */ var _lib_bigquery__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/bigquery */ \"(api)/./lib/bigquery.ts\");\n/* harmony import */ var _lib_nlToSql__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/nlToSql */ \"(api)/./lib/nlToSql.ts\");\n\n\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    // Check authentication\n    let session;\n    try {\n        session = await (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n    } catch (error) {\n        console.error(\"Session error:\", error);\n        if (error.name === \"JWEDecryptionFailed\") {\n            return res.status(401).json({\n                error: \"Session expired or invalid. Please sign in again.\",\n                code: \"SESSION_INVALID\"\n            });\n        }\n        return res.status(500).json({\n            error: \"Authentication error\"\n        });\n    }\n    if (!session || !session.accessToken) {\n        return res.status(401).json({\n            error: \"Authentication required\",\n            code: \"NO_SESSION\"\n        });\n    }\n    if (session.error === \"RefreshAccessTokenError\") {\n        return res.status(401).json({\n            error: \"Token expired. Please sign in again.\",\n            code: \"TOKEN_EXPIRED\"\n        });\n    }\n    try {\n        const { query } = req.body;\n        if (!query) {\n            return res.status(400).json({\n                error: \"Query is required\"\n            });\n        }\n        // Convert natural language to SQL\n        const sqlQuery = await (0,_lib_nlToSql__WEBPACK_IMPORTED_MODULE_3__.convertNLToSQL)(query);\n        console.log(\"Generated SQL Query:\", sqlQuery);\n        console.log(\"Original Query:\", query);\n        // Execute the query with user's access token\n        const bigquery = await (0,_lib_bigquery__WEBPACK_IMPORTED_MODULE_2__.getBigQueryClientWithToken)(session.accessToken);\n        const [rows] = await bigquery.query({\n            query: sqlQuery,\n            location: \"us-west1\" || 0\n        });\n        res.status(200).json({\n            success: true,\n            query,\n            sql: sqlQuery,\n            results: rows,\n            rowCount: rows.length\n        });\n    } catch (error) {\n        console.error(\"Query error:\", error);\n        // Handle specific BigQuery errors\n        if (error.code === 404) {\n            res.status(404).json({\n                success: false,\n                error: \"Dataset or table not found. Please check your BigQuery configuration.\",\n                code: \"RESOURCE_NOT_FOUND\",\n                details: {\n                    message: error.message,\n                    suggestion: \"Verify your PROJECT_ID, DATASET_ID, and TABLE_ID in the environment variables.\"\n                }\n            });\n        } else if (error.code === 403) {\n            res.status(403).json({\n                success: false,\n                error: \"Access denied to BigQuery resource.\",\n                code: \"ACCESS_DENIED\",\n                details: {\n                    message: error.message,\n                    suggestion: \"Ensure your Google account has BigQuery Data Viewer and Job User permissions.\"\n                }\n            });\n        } else {\n            res.status(500).json({\n                success: false,\n                error: error.message,\n                details: error.errors || []\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPO2dCQUNwQkQsU0FBU3JCLE1BQU13QixNQUFNLElBQUksRUFBRTtZQUM3QjtRQUNGO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2JpZ3F1ZXJ5LWFkcy1hbmFseXRpY3MvLi9wYWdlcy9hcGkvcXVlcnkvbmwudHM/NmExMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgvbmV4dCc7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gJy4uL2F1dGgvWy4uLm5leHRhdXRoXSc7XG5pbXBvcnQgeyBnZXRCaWdRdWVyeUNsaWVudFdpdGhUb2tlbiB9IGZyb20gJ0AvbGliL2JpZ3F1ZXJ5JztcbmltcG9ydCB7IGNvbnZlcnROTFRvU1FMIH0gZnJvbSAnQC9saWIvbmxUb1NxbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoXG4gIHJlcTogTmV4dEFwaVJlcXVlc3QsXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlXG4pIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIC8vIENoZWNrIGF1dGhlbnRpY2F0aW9uXG4gIGxldCBzZXNzaW9uO1xuICB0cnkge1xuICAgIHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZXNzaW9uIGVycm9yOicsIGVycm9yKTtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pXRURlY3J5cHRpb25GYWlsZWQnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBcbiAgICAgICAgZXJyb3I6ICdTZXNzaW9uIGV4cGlyZWQgb3IgaW52YWxpZC4gUGxlYXNlIHNpZ24gaW4gYWdhaW4uJyxcbiAgICAgICAgY29kZTogJ1NFU1NJT05fSU5WQUxJRCdcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIGVycm9yJyB9KTtcbiAgfVxuICBcbiAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLmFjY2Vzc1Rva2VuKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgXG4gICAgICBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyxcbiAgICAgIGNvZGU6ICdOT19TRVNTSU9OJ1xuICAgIH0pO1xuICB9XG4gIFxuICBpZiAoc2Vzc2lvbi5lcnJvciA9PT0gJ1JlZnJlc2hBY2Nlc3NUb2tlbkVycm9yJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IFxuICAgICAgZXJyb3I6ICdUb2tlbiBleHBpcmVkLiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi4nLFxuICAgICAgY29kZTogJ1RPS0VOX0VYUElSRUQnXG4gICAgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgcXVlcnkgfSA9IHJlcS5ib2R5O1xuICAgIFxuICAgIGlmICghcXVlcnkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUXVlcnkgaXMgcmVxdWlyZWQnIH0pO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnQgbmF0dXJhbCBsYW5ndWFnZSB0byBTUUxcbiAgICBjb25zdCBzcWxRdWVyeSA9IGF3YWl0IGNvbnZlcnROTFRvU1FMKHF1ZXJ5KTtcbiAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIFNRTCBRdWVyeTonLCBzcWxRdWVyeSk7XG4gICAgY29uc29sZS5sb2coJ09yaWdpbmFsIFF1ZXJ5OicsIHF1ZXJ5KTtcbiAgICBcbiAgICAvLyBFeGVjdXRlIHRoZSBxdWVyeSB3aXRoIHVzZXIncyBhY2Nlc3MgdG9rZW5cbiAgICBjb25zdCBiaWdxdWVyeSA9IGF3YWl0IGdldEJpZ1F1ZXJ5Q2xpZW50V2l0aFRva2VuKHNlc3Npb24uYWNjZXNzVG9rZW4gYXMgc3RyaW5nKTtcbiAgICBjb25zdCBbcm93c10gPSBhd2FpdCBiaWdxdWVyeS5xdWVyeSh7XG4gICAgICBxdWVyeTogc3FsUXVlcnksXG4gICAgICBsb2NhdGlvbjogcHJvY2Vzcy5lbnYuQklHUVVFUllfTE9DQVRJT04gfHwgJ1VTJyxcbiAgICB9KTtcblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBxdWVyeSxcbiAgICAgIHNxbDogc3FsUXVlcnksXG4gICAgICByZXN1bHRzOiByb3dzLFxuICAgICAgcm93Q291bnQ6IHJvd3MubGVuZ3RoLFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdRdWVyeSBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgLy8gSGFuZGxlIHNwZWNpZmljIEJpZ1F1ZXJ5IGVycm9yc1xuICAgIGlmIChlcnJvci5jb2RlID09PSA0MDQpIHtcbiAgICAgIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogJ0RhdGFzZXQgb3IgdGFibGUgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgeW91ciBCaWdRdWVyeSBjb25maWd1cmF0aW9uLicsXG4gICAgICAgIGNvZGU6ICdSRVNPVVJDRV9OT1RfRk9VTkQnLFxuICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBzdWdnZXN0aW9uOiAnVmVyaWZ5IHlvdXIgUFJPSkVDVF9JRCwgREFUQVNFVF9JRCwgYW5kIFRBQkxFX0lEIGluIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJ1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGVycm9yLmNvZGUgPT09IDQwMykge1xuICAgICAgcmVzLnN0YXR1cyg0MDMpLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiAnQWNjZXNzIGRlbmllZCB0byBCaWdRdWVyeSByZXNvdXJjZS4nLFxuICAgICAgICBjb2RlOiAnQUNDRVNTX0RFTklFRCcsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIHN1Z2dlc3Rpb246ICdFbnN1cmUgeW91ciBHb29nbGUgYWNjb3VudCBoYXMgQmlnUXVlcnkgRGF0YSBWaWV3ZXIgYW5kIEpvYiBVc2VyIHBlcm1pc3Npb25zLidcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgZGV0YWlsczogZXJyb3IuZXJyb3JzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbImdldFNlcnZlclNlc3Npb24iLCJhdXRoT3B0aW9ucyIsImdldEJpZ1F1ZXJ5Q2xpZW50V2l0aFRva2VuIiwiY29udmVydE5MVG9TUUwiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic2Vzc2lvbiIsImNvbnNvbGUiLCJuYW1lIiwiY29kZSIsImFjY2Vzc1Rva2VuIiwicXVlcnkiLCJib2R5Iiwic3FsUXVlcnkiLCJsb2ciLCJiaWdxdWVyeSIsInJvd3MiLCJsb2NhdGlvbiIsInByb2Nlc3MiLCJlbnYiLCJCSUdRVUVSWV9MT0NBVElPTiIsInN1Y2Nlc3MiLCJzcWwiLCJyZXN1bHRzIiwicm93Q291bnQiLCJsZW5ndGgiLCJkZXRhaWxzIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJlcnJvcnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/query/nl.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1"], () => (__webpack_exec__("(api)/./node_modules/.pnpm/next@14.0.4_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fquery%2Fnl&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fquery%2Fnl.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();